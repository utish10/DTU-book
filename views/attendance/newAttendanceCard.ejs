<%- layout("layouts/boilerplate.ejs") %>

<div class="container d-flex justify-content-center align-items-center mt-5">
  <div class="row">
    <h3 class="text-muted">Add Attendance Record</h3>
    <form
      action="/attendance/newrecord"
      method="POST"
      novalidate
      class="validated-form"
    >
      <div class="form-group my-2">
        <label for="course" class="form-label">Course</label>
        <select name="course" id="course" required class="form-control">
          <option value="<%=foundCourse.title%>">
            <%= foundCourse.title %>
          </option>
        </select>
      </div>
      <div class="form-group my-2">
        <label for="date" class="form-label">Date</label>
        <input
          type="date"
          id="date"
          required
          class="form-control"
          name="date"
          value="<%=date%>"
        />
      </div>
      <hr />
      <% for(let student of foundCourse.students){ %>
      <div class="form-group my-2">
        <div class="row">
          <label class="col-8 form-label" for="<%=student._id%>button">
            <%= student.firstName %> <%= student.lastName %>
            <span class="text-muted"><%= student._id %> </span>
          </label>
          <select
            name="attendance[]"
            id="<%=student._id%>button"
            class="form-select col"
            required
          >
            <option value="A" selected>Absent</option>
            <option value="P">Present</option>
          </select>
        </div>
      </div>
      <% } %>
      <button class="btn btn-success w-100 mt-5">Done</button>
    </form>
  </div>
</div>
